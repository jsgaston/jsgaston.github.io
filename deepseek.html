<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DeepSeek Integrado</title>
    <style>
        :root {
            --primary-color: #4a6cf7;
            --secondary-color: #6c757d;
            --background-color: #f8f9fa;
            --text-color: #212529;
            --border-radius: 8px;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background-color: var(--background-color);
            color: var(--text-color);
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 25px;
            border-radius: var(--border-radius);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        h1 {
            color: var(--primary-color);
            text-align: center;
            margin-bottom: 30px;
        }
        
        .chat-container {
            border: 1px solid #ddd;
            border-radius: var(--border-radius);
            height: 400px;
            overflow-y: auto;
            padding: 15px;
            margin-bottom: 20px;
            background: #fafafa;
        }
        
        .message {
            margin-bottom: 15px;
            padding: 10px 15px;
            border-radius: 18px;
            max-width: 80%;
        }
        
        .user-message {
            background-color: var(--primary-color);
            color: white;
            margin-left: auto;
            border-bottom-right-radius: 5px;
        }
        
        .bot-message {
            background-color: #e9ecef;
            color: var(--text-color);
            margin-right: auto;
            border-bottom-left-radius: 5px;
        }
        
        .input-container {
            display: flex;
            gap: 10px;
        }
        
        input[type="text"] {
            flex: 1;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: var(--border-radius);
            font-size: 16px;
        }
        
        button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.3s;
        }
        
        button:hover {
            background-color: #3a5ad9;
        }
        
        .api-key-container {
            margin-bottom: 20px;
            padding: 15px;
            background: #f1f8ff;
            border-radius: var(--border-radius);
        }
        
        .api-key-container input {
            width: 100%;
            padding: 10px;
            margin-top: 5px;
            border: 1px solid #b3d7ff;
            border-radius: 4px;
        }
        
        .remember-container {
            margin-top: 10px;
            display: flex;
            align-items: center;
        }
        
        .remember-container input {
            margin-right: 8px;
        }
        
        .typing-indicator {
            display: none;
            padding: 10px 15px;
            background-color: #e9ecef;
            border-radius: 18px;
            margin-right: auto;
            border-bottom-left-radius: 5px;
            width: fit-content;
            color: var(--secondary-color);
        }
        
        .typing-indicator span {
            animation: typing 1.4s infinite;
            display: inline-block;
        }
        
        .typing-indicator span:nth-child(2) {
            animation-delay: 0.2s;
        }
        
        .typing-indicator span:nth-child(3) {
            animation-delay: 0.4s;
        }
        
        @keyframes typing {
            0%, 100% { opacity: 0.4; }
            50% { opacity: 1; }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>DeepSeek Chat Integrado</h1>
        
        <div class="api-key-container">
            <label for="api-key">Clave API de DeepSeek:</label>
            <input type="password" id="api-key" placeholder="Ingresa tu clave API">
            <div class="remember-container">
                <input type="checkbox" id="remember-key">
                <label for="remember-key">Recordar mi clave (usa localStorage)</label>
            </div>
        </div>
        
        <div class="chat-container" id="chat-container">
            <div class="message bot-message">
                ¡Hola! Soy DeepSeek integrado en esta página web. ¿En qué puedo ayudarte?
            </div>
        </div>
        
        <div class="input-container">
            <input type="text" id="user-input" placeholder="Escribe tu mensaje aquí...">
            <button id="send-button">Enviar</button>
        </div>
        
        <div class="typing-indicator" id="typing-indicator">
            DeepSeek está escribiendo<span>.</span><span>.</span><span>.</span>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const chatContainer = document.getElementById('chat-container');
            const userInput = document.getElementById('user-input');
            const sendButton = document.getElementById('send-button');
            const apiKeyInput = document.getElementById('api-key');
            const rememberKeyCheckbox = document.getElementById('remember-key');
            const typingIndicator = document.getElementById('typing-indicator');
            
            // Cargar API key guardada si existe
            const savedApiKey = localStorage.getItem('deepseekApiKey');
            if (savedApiKey) {
                apiKeyInput.value = savedApiKey;
                rememberKeyCheckbox.checked = true;
            }
            
            // Función para agregar mensajes al chat
            function addMessage(message, isUser = false) {
                const messageDiv = document.createElement('div');
                messageDiv.classList.add('message');
                messageDiv.classList.add(isUser ? 'user-message' : 'bot-message');
                messageDiv.textContent = message;
                chatContainer.appendChild(messageDiv);
                chatContainer.scrollTop = chatContainer.scrollHeight;
            }
            
            // Función para mostrar/ocultar el indicador de escritura
            function showTypingIndicator(show) {
                typingIndicator.style.display = show ? 'block' : 'none';
                if (show) {
                    chatContainer.scrollTop = chatContainer.scrollHeight;
                }
            }
            
            // Función para enviar mensaje a la API (simulada)
            async function sendToDeepSeek(message) {
                const apiKey = apiKeyInput.value;
                
                if (!apiKey) {
                    addMessage("Por favor, ingresa tu clave API de DeepSeek primero.");
                    return;
                }
                
                // Guardar API key si el checkbox está marcado
                if (rememberKeyCheckbox.checked) {
                    localStorage.setItem('deepseekApiKey', apiKey);
                } else {
                    localStorage.removeItem('deepseekApiKey');
                }
                
                showTypingIndicator(true);
                
                try {
                    // En una implementación real, aquí harías la llamada a la API de DeepSeek
                    // Esta es una simulación de la respuesta
                    setTimeout(() => {
                        showTypingIndicator(false);
                        
                        // Respuesta simulada (en una implementación real, usarías la respuesta de la API)
                        const responses = [
                            "¡Interesante pregunta! DeepSeek puede ayudarte con una variedad de tareas, desde responder preguntas hasta generar contenido creativo.",
                            "Basándome en tu consulta, te recomendaría explorar más sobre este tema. DeepSeek tiene capacidades avanzadas de procesamiento de lenguaje natural.",
                            "He procesado tu solicitud. ¿Hay algo más específico en lo que pueda asistirte?",
                            "Como modelo de lenguaje de DeepSeek, puedo ayudarte con análisis de texto, respuestas a preguntas, generación de contenido y más."
                        ];
                        
                        const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                        addMessage(randomResponse);
                    }, 1500);
                    
                    // Código de ejemplo para una llamada real a la API (descomenta y adapta cuando tengas la API real)
                    /*
                    const response = await fetch('https://api.deepseek.com/chat', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${apiKey}`
                        },
                        body: JSON.stringify({
                            message: message,
                            // otros parámetros según la API
                        })
                    });
                    
                    if (!response.ok) {
                        throw new Error('Error en la respuesta de la API');
                    }
                    
                    const data = await response.json();
                    showTypingIndicator(false);
                    addMessage(data.response);
                    */
                    
                } catch (error) {
                    showTypingIndicator(false);
                    addMessage("Lo siento, ha ocurrido un error al conectar con DeepSeek. Por favor, verifica tu API key e intenta nuevamente.");
                    console.error("Error:", error);
                }
            }
            
            // Event listeners
            sendButton.addEventListener('click', handleUserMessage);
            userInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    handleUserMessage();
                }
            });
            
            function handleUserMessage() {
                const message = userInput.value.trim();
                if (message) {
                    addMessage(message, true);
                    userInput.value = '';
                    sendToDeepSeek(message);
                }
            }
        });
    </script>
</body>
</html>
